pipeline {
    agent any

    stages {
       stage('Env Variable'){
          steps {
              dir('ViQuJob') {
                SPRING_DATABASE_URL = "jdbc:postgresql://localhost:5432/hola",
                SPRING_USERNAME = "root",
                SPRING_PASSWORD = "password"
              }
          }
       }
       stage('clean') {
            steps {
              dir('ViQuJob') {
                bat 'mvn clean compile package'
              }
            }
        }
        stage('compile') {
            steps {
              dir('ViQuJob') {
                bat 'mvn compile'
              }
            }
        }
        stage('package') {
            steps {
              dir('ViQuJob') {
                bat 'mvn package -DskipTests'
              }
            }
        }
        stage('test') {
            steps {
              dir('ViQuJob') {
                bat 'mvn clean compile test'
              }
            }
        }
    }
}
